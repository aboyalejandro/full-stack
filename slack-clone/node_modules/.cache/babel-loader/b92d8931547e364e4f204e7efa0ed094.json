{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/alejandroaboy/slack-clone/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/alejandroaboy/slack-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import React,{useRef,useEffect}from'react';import styled from\"styled-components\";import StarBorderOutlinedIcon from'@material-ui/icons/StarBorderOutlined';import InfoOutlinedIcon from'@material-ui/icons/InfoOutlined';import{useSelector}from\"react-redux\";import{selectRoomId}from\"../../features/appSlice\";import ChatInput from\"./ChatInput\";import{useCollection,useDocument}from\"react-firebase-hooks/firestore\";import{db}from\"../../firebase\";import Message from\"./Message\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Chat(){var chatRef=useRef(null);var roomId=useSelector(selectRoomId);var _useDocument=useDocument(roomId&&db.collection(\"rooms\").doc(roomId)),_useDocument2=_slicedToArray(_useDocument,1),roomDetails=_useDocument2[0];var _useCollection=useCollection(roomId&&db.collection(\"rooms\").doc(roomId).collection(\"messages\").orderBy(\"timestamp\",\"asc\")),_useCollection2=_slicedToArray(_useCollection,2),roomMessages=_useCollection2[0],loading=_useCollection2[1];useEffect(function(){var _chatRef$current;chatRef===null||chatRef===void 0?void 0:(_chatRef$current=chatRef.current)===null||_chatRef$current===void 0?void 0:_chatRef$current.scrollIntoView({behavior:\"smooth\"});},[roomId,loading]);//console.log(roomDetails).data())\n//console.log(roomMessages)\nreturn/*#__PURE__*/_jsx(ChatContainer,{children:roomDetails&&roomMessages&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsxs(HeaderLeft,{children:[/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"#\",roomDetails===null||roomDetails===void 0?void 0:roomDetails.data().name]})}),/*#__PURE__*/_jsx(StarBorderOutlinedIcon,{})]}),/*#__PURE__*/_jsx(HeaderRight,{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(InfoOutlinedIcon,{}),\" Details\"]})})]}),/*#__PURE__*/_jsxs(ChatMessages,{children:[roomMessages===null||roomMessages===void 0?void 0:roomMessages.docs.map(function(doc){var _doc$data=doc.data(),message=_doc$data.message,timestamp=_doc$data.timestamp,user=_doc$data.user,userImage=_doc$data.userImage;return/*#__PURE__*/_jsx(Message,{message:message,timestamp:timestamp,user:user,userImage:userImage},doc.id);}),/*#__PURE__*/_jsx(ChatBottom,{ref:chatRef})]}),/*#__PURE__*/_jsx(ChatInput,{chatRef:chatRef,ChannelName:roomDetails===null||roomDetails===void 0?void 0:roomDetails.data().name,channelId:roomId})]})});}export default Chat;var ChatContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    flex: 0.7;\\n    flex-grow: 1;\\n    overflow-y: scroll;\\n    margin-top: 60px;\\n\"])));var HeaderLeft=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    display: flex;\\n    align-items: center;\\n\\n    > h4 {\\n        display: flex;\\n        text-transform: lowercase;\\n        margin-right: 10px;\\n    }\\n\\n    > h4 > .MuiSvgIcon-root {\\n        margin-left: 10px;\\n        font-size: 18px;\\n    }\\n\\n\"])));var HeaderRight=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    > p {\\n        display: flex;\\n        align-items: center;\\n        font-size: 14px;\\n    }\\n\\n    > p > .MuiSvgIcon-root {\\n        margin-right: 5px !important;\\n        font-size: 16px;\\n    }\\n\\n\"])));var Header=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: space-between;\\n    padding: 20px;\\n    border-bottom: 1px solid lightgray;\\n\"])));var ChatMessages=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\n\"])));var ChatBottom=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n    padding-bottom: 100px;\\n\"])));","map":{"version":3,"sources":["/Users/alejandroaboy/slack-clone/src/app/components/Chat.js"],"names":["React","useRef","useEffect","styled","StarBorderOutlinedIcon","InfoOutlinedIcon","useSelector","selectRoomId","ChatInput","useCollection","useDocument","db","Message","Chat","chatRef","roomId","collection","doc","roomDetails","orderBy","roomMessages","loading","current","scrollIntoView","behavior","data","name","docs","map","message","timestamp","user","userImage","id","ChatContainer","div","HeaderLeft","HeaderRight","Header","ChatMessages","ChatBottom"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect} from 'react'\nimport styled from \"styled-components\"\nimport StarBorderOutlinedIcon from '@material-ui/icons/StarBorderOutlined'\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined'\nimport {useSelector} from \"react-redux\"\nimport {selectRoomId} from \"../../features/appSlice\"\nimport ChatInput from \"./ChatInput\"\nimport {useCollection, useDocument} from \"react-firebase-hooks/firestore\"\nimport {db} from \"../../firebase\"\nimport Message from \"./Message\"\n\nfunction Chat() {\n    const chatRef = useRef(null)\n    const roomId = useSelector(selectRoomId);\n    const [roomDetails] = useDocument(\n        roomId && \n        db.collection(\"rooms\").doc(roomId)\n    )\n\n    const [roomMessages, loading] = useCollection(\n        roomId && \n        db.collection(\"rooms\")\n        .doc(roomId)\n        .collection(\"messages\")\n        .orderBy(\"timestamp\", \"asc\")\n    );\n\n    useEffect(() => {\n        chatRef?.current?.scrollIntoView({\n            behavior: \"smooth\",\n        });\n    }, [roomId, loading])\n\n    //console.log(roomDetails).data())\n    //console.log(roomMessages)\n\n    return (\n        <ChatContainer>\n            {roomDetails && roomMessages && (\n                 <>\n                 <Header>\n                     <HeaderLeft>\n                         <h4><strong>#{roomDetails?.data().name}</strong></h4>\n                         <StarBorderOutlinedIcon/>\n                     </HeaderLeft>\n                     <HeaderRight>\n                         <p>\n                             <InfoOutlinedIcon/> Details\n                         </p>\n      \n                     </HeaderRight>\n                 </Header>\n      \n                  <ChatMessages>\n                      {roomMessages?.docs.map((doc) => {\n                          const {message, timestamp, user, userImage} = doc.data();\n                          return (\n                              <Message\n                                  key={doc.id}\n                                  message={message}\n                                  timestamp={timestamp}\n                                  user={user}\n                                  userImage={userImage}\n                              />\n                          );\n                      })}\n                      <ChatBottom ref={chatRef}/>\n                  </ChatMessages>\n                  <ChatInput\n                      chatRef = {chatRef}\n                      ChannelName={roomDetails?.data().name}\n                      channelId={roomId}    \n                  />\n                 </>\n            ) }\n           \n        </ChatContainer>        \n    )\n}\n\nexport default Chat\n\nconst ChatContainer = styled.div`\n    flex: 0.7;\n    flex-grow: 1;\n    overflow-y: scroll;\n    margin-top: 60px;\n`\nconst HeaderLeft = styled.div`\n    display: flex;\n    align-items: center;\n\n    > h4 {\n        display: flex;\n        text-transform: lowercase;\n        margin-right: 10px;\n    }\n\n    > h4 > .MuiSvgIcon-root {\n        margin-left: 10px;\n        font-size: 18px;\n    }\n\n`\nconst HeaderRight = styled.div`\n    > p {\n        display: flex;\n        align-items: center;\n        font-size: 14px;\n    }\n\n    > p > .MuiSvgIcon-root {\n        margin-right: 5px !important;\n        font-size: 16px;\n    }\n\n`\nconst Header = styled.div`\n    display: flex;\n    justify-content: space-between;\n    padding: 20px;\n    border-bottom: 1px solid lightgray;\n`\n\nconst ChatMessages = styled.div`\n\n`\n\nconst ChatBottom = styled.div`\n    padding-bottom: 100px;\n`"]},"metadata":{},"sourceType":"module"}