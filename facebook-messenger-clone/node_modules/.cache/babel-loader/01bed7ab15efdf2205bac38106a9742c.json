{"ast":null,"code":"import _slicedToArray from\"/Users/alejandroaboy/facebook-messenger-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect}from'react';import{Button,FormControl,Input,InputLabel}from\"@material-ui/core\";import Message from\"./Message\";import db from\"./firebase\";import firebase from\"firebase\";import FlipMove from\"react-flip-move\";import SendIcon from\"@material-ui/icons/Send\";import{IconButton}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];//console.log(input)\n//console.log(messages)\nuseEffect(function(){db.collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){setMessages(snapshot.docs.map(function(doc){return{id:doc.id,message:doc.data()};}));});},[]);useEffect(function(){setUsername(prompt('Please enter your name'));},[]);var sendMessage=function sendMessage(event){event.preventDefault();// setMessages([...messages, input]) //Keep the current and append the ending one\ndb.collection(\"messages\").add({message:input,username:username,timestamp:firebase.firestore.FieldValue.serverTimestamp()});// setMessages([...messages, {username: username, text: input}]) //Keep the current and append the ending one\nsetInput(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Facebook Messenger Clone\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome \",username,\" \"]}),/*#__PURE__*/_jsx(\"form\",{className:\"app_form\",children:/*#__PURE__*/_jsxs(FormControl,{className:\"app_formControl\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Enter a message...\"}),/*#__PURE__*/_jsx(Input,{className:\"app_input\",placeholder:\"Enter a message...\",value:input,onChange:function onChange(event){return setInput(event.target.value);}}),/*#__PURE__*/_jsx(IconButton,{className:\"app_iconButton\",disabled:!input,variant:\"contained\",color:\"primary\",type:\"submit\",onClick:sendMessage,children:/*#__PURE__*/_jsx(SendIcon,{className:\"app_sendIcon\"})})]})}),/*#__PURE__*/_jsx(FlipMove,{children:messages.map(function(_ref){var id=_ref.id,message=_ref.message;return/*#__PURE__*/_jsx(Message,{username:username,message:message},id)//<p>{message}</p>\n;})})]});}export default App;","map":{"version":3,"sources":["/Users/alejandroaboy/facebook-messenger-clone/src/App.js"],"names":["React","useState","useEffect","Button","FormControl","Input","InputLabel","Message","db","firebase","FlipMove","SendIcon","IconButton","App","input","setInput","messages","setMessages","username","setUsername","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","message","data","prompt","sendMessage","event","preventDefault","add","timestamp","firestore","FieldValue","serverTimestamp","target","value"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, {useState, useEffect} from 'react'\nimport {Button, FormControl, Input, InputLabel} from \"@material-ui/core\"\nimport Message from \"./Message\"\nimport db from \"./firebase\"\nimport firebase from \"firebase\"\nimport FlipMove from \"react-flip-move\"\nimport SendIcon from \"@material-ui/icons/Send\"\nimport {IconButton} from \"@material-ui/core\"\n\nfunction App() {\nconst [input, setInput] = useState(\"\");\nconst [messages, setMessages] = useState([]);\nconst [username, setUsername] = useState(\"\")\n//console.log(input)\n//console.log(messages)\n\nuseEffect(() => {\n  db.collection('messages')\n  .orderBy('timestamp','desc')\n  .onSnapshot(snapshot => {\n    setMessages(snapshot.docs.map(doc => ({id: doc.id, message: doc.data()})))\n  })\n},[])\n\nuseEffect(() => {\n  setUsername(prompt('Please enter your name'))\n}, [])\n\nconst sendMessage = (event) => {\n  event.preventDefault();\n  // setMessages([...messages, input]) //Keep the current and append the ending one\n  \n  db.collection(\"messages\").add({\n    message: input, \n    username: username, \n    timestamp: firebase.firestore.FieldValue.serverTimestamp()\n  })\n  \n  // setMessages([...messages, {username: username, text: input}]) //Keep the current and append the ending one\n  setInput(\"\");\n}\n\n  return (\n    <div className=\"App\">\n      <h1>Facebook Messenger Clone</h1>\n      <h2>Welcome {username} </h2>\n      <form className=\"app_form\">\n        <FormControl className=\"app_formControl\">\n          <InputLabel>Enter a message...</InputLabel>\n          <Input className=\"app_input\" placeholder=\"Enter a message...\" value={input} onChange={event => setInput(event.target.value)}/> \n          <IconButton className=\"app_iconButton\" disabled={!input} variant=\"contained\" color=\"primary\" type=\"submit\" onClick={sendMessage}>\n            <SendIcon className=\"app_sendIcon\"/> \n          </IconButton>\n        </FormControl>\n      </form>\n\n      {/*messages themselves */}\n  <FlipMove>\n        {\n          messages.map(({id, message}) => (\n            <Message \n              key={id}\n              username={username} \n              message={message}\n            />\n            //<p>{message}</p>\n          ))\n        }\n  </FlipMove>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}